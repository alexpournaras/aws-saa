Vertical scalability 
* increase size of isntance
* t2.micro to t2.large
* use case a database
* there is a limit (hardware limit)
* scale up/down

horizontal
* increase number of instances
* application should be design to be distributed
* aws elasticity
* scale out/in

high availability
* its tight with horizontal scaling
* it means there are instances in at least 2 AZs
* the goal is to survive a failure in 1 AZ


load balancer = servers that forward traffic to multiple servers
version 2: 

application load balancer (ALB)
* HTTP, HTTPS, websockets
* layer 7 (HTTP)
* based on path example.com/users
* based on hostname url test.example.com
* based on query example.com/users?id=123
* perfect for microservices and container based applications
target group:
ec2 instances
ecs tasks
lambda functions
private ip addresses
* alb can route to multiple target groups and multiple applications
* health checks are at the targer group level
* fixed hostname XXX.region.elb.amazonaws.com
* the application can see client ip from headers X-Forwarded-For, X-forwarded-port, x-forwarded-proto


network load balancer (NLB)
* TCP, UDP, TLS (secure TCP)
* layer 4 (tcp & udp traffic)
* handle million of requests per seconds
* ultra-low latency
* one static ip (can assign elastic ip) per AZ
target groups:
ec2 instances
private ip addresses
application load balancer
* health checks: tcp, http and https

Gateway load balancer (GWLB)
* firewalls, intrusion detection, prevention systems, deep packet inspection systems, payload manipulation
* for traffic that we need it to go first from some 3rd party security virtual appliances (perhaps we need to inspect what the packets are holding?)
* layer 3 (network, ip packets)
* uses GENEVE protocol on port 6081
target groups:
ec2 instances
private ip addresses

---

security group:
load balancer has inbound http and https from 0.0.0.0
the insances have inbound http 80 only from security group of load balancer

---

sticky sessions - session affinity

* same client is always redirected to the same instance behind a load balancer
* its happeing with a cookie
* use case: user doesnt lose his session data
* may bring imbalance to the load over ec2 instances

application based cookies
* custom cookie (generated by target, should not be AWSALB, AWSALBAPP, AWSALBTG)
* application cookie ( generated by load balancer AWSALBAPP)

duration based cookies
* generated by the load balancer (AWSALB)

--

cross zone load balancing

enabled:
each instance across all AZs are taking evenly load

disabled:
load distrubuted evenly among AZs. not per instance. 

ALB has it enabled by default and can be disabled from the target group, no charges.

NLB & GWLB have it disabled by default. you pay charges if enabled

---

